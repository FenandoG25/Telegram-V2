(this["webpackJsonpTelegram-v2"]=this["webpackJsonpTelegram-v2"]||[]).push([[0],{63:function(e,t,a){},67:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var c=a(4),s=a(2),n=a.n(s),i=a(18),r=a.n(i),d=(a(63),a(11)),o=(a(67),a(90)),l=a(26),j=l.a.initializeApp({apiKey:"AIzaSyCDcjRBnEIPND-NOTweGpORfaZBjdPdK4I",authDomain:"telegram-clone-e9f24.firebaseapp.com",projectId:"telegram-clone-e9f24",storageBucket:"telegram-clone-e9f24.appspot.com",messagingSenderId:"54792597912",appId:"1:54792597912:web:38ebdf64c07d9db3bc3bed",measurementId:"G-Y5DMDE7TW8"}).firestore(),u=l.a.auth(),m=new l.a.auth.GoogleAuthProvider,b=j,h=(a(71),function(){return Object(c.jsx)("div",{className:"login",children:Object(c.jsxs)("div",{className:"login__telegram",children:[Object(c.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Telegram_2019_Logo.svg/100px-Telegram_2019_Logo.svg.png",alt:"telgram logo"}),Object(c.jsx)("h1",{children:"Telegram Clone"}),Object(c.jsx)(o.a,{className:"login__button",onClick:function(){u.signInWithPopup(m).catch((function(e){alert(e.message)}))},children:"Iniciar sesion"})]})})}),O=a(22),p=(a(72),a(46)),f=a.n(p),x=a(47),v=a.n(x),g=a(91),_=a(92),N=(a(73),a(24)),S=Object(N.b)({name:"thread",initialState:{threadId:null,threadName:null},reducers:{setThread:function(e,t){e.threadId=t.payload.threadId,e.threadName=t.payload.threadName}}}),I=S.actions.setThread,y=function(e){return e.thread.threadId},D=function(e){return e.thread.threadName},T=S.reducer,k=function(e){var t,a,n,i,r=e.id,o=e.threadName,l=Object(d.b)(),j=Object(s.useState)([]),u=Object(O.a)(j,2),m=u[0],h=u[1];return Object(s.useEffect)((function(){b.collection("mensajes").doc(r).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return h(e.docs.map((function(e){return e.data()})))}))}),[r]),Object(c.jsxs)("div",{className:"sidebarThread",onClick:function(){return l(I({threadId:r,threadName:o}))},children:[Object(c.jsx)(_.a,{src:null===(t=m[0])||void 0===t?void 0:t.photo}),Object(c.jsxs)("div",{className:"sidebarThread__details",children:[Object(c.jsx)("h3",{children:o}),Object(c.jsx)("p",{children:null===(a=m[0])||void 0===a?void 0:a.message}),Object(c.jsx)("small",{className:"sidebarThread__timestamp",children:new Date(null===(n=m[0])||void 0===n||null===(i=n.timestamp)||void 0===i?void 0:i.toDate()).toLocaleString()})]})]})},w=a(48),C=a.n(w),B=Object(N.b)({name:"user",initialState:{value:0},reducers:{login:function(e,t){e.user=t.payload},logout:function(e){e.user=null}}}),E=B.actions,L=E.login,A=E.logout,z=function(e){return e.user.user},M=B.reducer,P=function(){var e=Object(d.c)(z),t=Object(s.useState)([]),a=Object(O.a)(t,2),n=a[0],i=a[1];Object(s.useEffect)((function(){b.collection("mensajes").onSnapshot((function(e){return i(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]);return Object(c.jsxs)("div",{className:"sidebar",children:[Object(c.jsxs)("div",{className:"sidebar__header",children:[Object(c.jsxs)("div",{className:"sidebar__search",children:[Object(c.jsx)(f.a,{className:"sidebar__searchIcon"}),Object(c.jsx)("input",{placeholder:"Buscar",className:"sidebar__input"})]}),Object(c.jsx)(g.a,{variant:"outlined",id:"sidebar__button",children:Object(c.jsx)(v.a,{onClick:function(){var e=prompt("Crear un nuevo chat");b.collection("mensajes").add({threadName:e})}})})]}),Object(c.jsx)("div",{className:"sidebar__threads",children:n.map((function(e){var t=e.id,a=e.data.threadName;return Object(c.jsx)(k,{id:t,threadName:a},t)}))}),Object(c.jsxs)("div",{className:"sidebar__bottom",children:[Object(c.jsx)(_.a,{src:e.photo,className:"sidebar__bottom_avatar",onClick:function(){return u.signOut()}}),Object(c.jsx)(g.a,{children:Object(c.jsx)(C.a,{})})]})]})},R=(a(75),a(49)),U=a.n(R),G=(a(76),a(51)),H=a.n(G),J=a(52),K=a.n(J),W=(a(77),Object(s.forwardRef)((function(e,t){e.id;var a=e.data,s=a.timestamp,n=a.displayName,i=a.email,r=a.message,o=a.photo,l=(a.uid,Object(d.c)(z));return Object(c.jsxs)("div",{ref:t,className:"message ".concat(l.email===i&&"message__sender"),children:[Object(c.jsx)(_.a,{src:o,className:"message__photo"}),Object(c.jsxs)("div",{className:"message__contents",children:[Object(c.jsx)("p",{className:"message__content1",children:n}),Object(c.jsx)("p",{className:"message__content",children:r}),Object(c.jsx)("small",{className:"message__timestamp",children:new Date(null===s||void 0===s?void 0:s.toDate()).toLocaleString("es-US")})]})]})}))),q=a(53),F=a(50),V=function(){var e,t,a=Object(s.useState)(""),n=Object(O.a)(a,2),i=n[0],r=n[1],o=Object(s.useState)([]),j=Object(O.a)(o,2),u=j[0],m=j[1],h=Object(d.c)(D),p=Object(d.c)(y),f=Object(d.c)(z);Object(s.useEffect)((function(){p&&b.collection("mensajes").doc(p).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return m(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[p]);return Object(c.jsxs)("div",{className:"thread",children:[Object(c.jsxs)("div",{className:"thread__header",children:[Object(c.jsxs)("div",{className:"thread__headerDetails",children:[p?Object(c.jsx)(_.a,{src:f.photo}):Object(c.jsx)(_.a,{}),Object(c.jsxs)("div",{className:"thread__headerDetails_info",children:[Object(c.jsx)("h4",{children:p?h:"Haga clic en cualquier nombre de chat"}),Object(c.jsx)("h5",{children:p?q.a(null===(e=u[0])||void 0===e||null===(t=e.timestamp)||void 0===t?void 0:t.toDate().toLocaleString("es-US")):"Ultima vez visto"})]})]}),Object(c.jsx)(g.a,{children:Object(c.jsx)(U.a,{className:"thread__headerMoreHoriz"})})]}),Object(c.jsx)("div",{className:"thread__messages",children:Object(c.jsx)(F.a,{children:u.map((function(e){var t=e.id,a=e.data;return Object(c.jsx)(W,{id:t,data:a},t)}))})}),Object(c.jsx)("div",{className:"thread__input",children:Object(c.jsxs)("form",{children:[Object(c.jsx)("input",{placeholder:"Mensaje....",type:"text",value:i,onChange:function(e){return r(e.target.value)}}),Object(c.jsx)(g.a,{onClick:function(e){e.preventDefault(),b.collection("mensajes").doc(p).collection("messages").add({timestamp:l.a.firestore.FieldValue.serverTimestamp(),message:i,uid:f.uid,photo:f.photo,email:f.email,displayName:f.displayName}),r("")},type:"sumbit",children:Object(c.jsx)(H.a,{})}),Object(c.jsx)(g.a,{children:Object(c.jsx)(K.a,{})})]})})]})};var Y=function(){return Object(c.jsxs)("div",{className:"telegram",children:[Object(c.jsx)(P,{}),Object(c.jsx)(V,{})]})};var Z=function(){var e=Object(d.c)(z),t=Object(d.b)();return Object(s.useEffect)((function(){u.onAuthStateChanged((function(e){t(e?L({uid:e.uid,photo:e.photoURL,displayName:e.displayName,email:e.email}):A()),console.log(e)}))}),[t]),Object(c.jsx)("div",{className:"App",children:e?Object(c.jsx)(Y,{}):Object(c.jsx)(h,{})})},Q=Object(N.a)({reducer:{user:M,thread:T}});r.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(d.a,{store:Q,children:Object(c.jsx)(Z,{})})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.a1ef13a7.chunk.js.map